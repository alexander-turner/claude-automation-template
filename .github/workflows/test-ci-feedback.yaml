name: Test CI Feedback

# Test workflow to verify the CI failure notification system works.
# Manually triggered to avoid failing on real PRs.
# To test: Run this workflow manually, then check if comment-on-failed-checks posts @claude notification.

on:
  workflow_dispatch:
    inputs:
      should_fail:
        description: "Should the workflow fail? (for testing notifications)"
        required: true
        default: "true"
        type: boolean

permissions:
  contents: read

jobs:
  test-ci-feedback:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: CI feedback test
        run: |
          echo "Testing CI feedback notification system."
          echo "Should fail: ${{ inputs.should_fail }}"
          if [[ "${{ inputs.should_fail }}" == "true" ]]; then
            echo "Intentionally failing to test @claude notification..."
            exit 1
          else
            echo "Success path - no notification expected."
            exit 0
          fi
